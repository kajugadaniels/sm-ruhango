{% extends 'layouts/app.html' %}
{% load static %}
{% block content %}
    {% include 'components/hero.html' %}

    <section class="layout-pt-md layout-pb-lg">
        <div data-anim-wrap class="container">
            <div data-anim-child="slide-up" class="row y-gap-20 justify-between items-end">
                <div class="col-auto">
                    <div class="sectionTitle -md">
                        <h2 class="sectionTitle__title">
                            {% if request.session.lang == "fr" %}
                                Horaire des messes
                            {% elif request.session.lang == "rw" %}
                                Igihe cya Misa
                            {% elif request.session.lang == "sw" %}
                                Ratiba ya&nbsp;Misa
                            {% else %}
                                Mass Schedule
                            {% endif %}
                        </h2>
                        <p class=" sectionTitle__text mt-5 sm:mt-0">
                            
                        </p>
                    </div>
                </div>
                <div class="col-auto">
                    <a href="{% url 'base:massSchedule' %}" class="button -md -blue-1 bg-blue-1-05 text-blue-1">
                        {% if request.session.lang == "fr" %}
                            Voir plus
                        {% elif request.session.lang == "rw" %}
                            Reba Byinshi
                        {% elif request.session.lang == "sw" %}
                            Tazama Zaidi
                        {% else %}
                            View More
                        {% endif %}
                        <div class="icon-arrow-top-right ml-15"></div>
                    </a>
                </div>
            </div>
            <div class="row y-gap-30 pt-40 sm:pt-20">
                {% for schedule in schedules %}
                    <div data-anim-child="slide-up delay-1" class="col-12">
                        <div class="px-20 py-20 rounded-4 border-light">
                            <div class="row y-gap-30 justify-between xl:justify-">
        
                                <div class="col-xl-9 col-lg-12">
                                    <div class="row y-gap-10 items-center">
                                        <div class="col-sm-auto">
                                            <img class="size-40" src="{% static 'img/logo/logo.png' %}" alt="image">
                                        </div>
        
                                        <div class="col">
                                            <div class="row x-gap-20 items-end">
                                                <div class="col-auto">
                                                    <div class="lh-15 fw-500">
                                                        {{ schedule.start_time|date:"H:i" }}
                                                    </div>
                                                    <div class="text-15 lh-15 text-light-1">
                                                        {{ schedule.start_time|date:"A" }}
                                                    </div>
                                                </div>
        
                                                <div class="col text-center">
                                                    <div class="flightLine">
                                                        <div></div>
                                                        <div></div>
                                                    </div>
                                                    <div class="text-15 lh-15 text-light-1 mt-10">
                                                        {{ schedule.date|date:"F j"|upper }}
                                                    </div>
                                                </div>
        
                                                <div class="col-auto">
                                                    <div class="lh-15 fw-500">
                                                        {{ schedule.end_time|date:"H:i" }}
                                                    </div>
                                                    <div class="text-15 lh-15 text-light-1">
                                                        {{ schedule.end_time|date:"A" }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
        
                                <div class="col-auto">
                                    <div class="d-flex items-center">
                                        <div class="text-right mr-24">
                                            <div class="lh-15 fw-500">
                                                {% if request.session.lang == "fr" %}
                                                    {% if schedule.mass_type == "morning" %}Messe du matin{% else %}Messe du soir{% endif %}
                                                {% elif request.session.lang == "rw" %}
                                                    {% if schedule.mass_type == "morning" %}Misa ya mu gitondo{% else %}Misa ya nimugoroba{% endif %}
                                                {% elif request.session.lang == "sw" %}
                                                    {% if schedule.mass_type == "morning" %}Misa ya asubuhi{% else %}Misa ya jioni{% endif %}
                                                {% else %}
                                                    {{ schedule.get_mass_type_display }}
                                                {% endif %}
                                            </div>
                                            <div class="text-15 lh-15 text-light-1"></div>
                                        </div>
                                        {% comment %} <a href="#" class="button -outline-blue-1 px-30 h-50 text-blue-1">
                                            View Deal <div class="icon-arrow-top-right ml-15"></div>
                                        </a> {% endcomment %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                        <div class="col-12 text-center text-light-1">
                            {% if request.session.lang == "fr" %}
                                Pas d’horaires disponibles.
                            {% elif request.session.lang == "rw" %}
                                Nta gahunda ziboneka.
                            {% elif request.session.lang == "sw" %}
                                Hakuna ratiba zinapatikana.
                            {% else %}
                                No schedules available.
                            {% endif %}
                        </div>
                    {% endfor %}
            </div>
        </div>
    </section>

    <section class="layout-pt-md layout-pb-md bg-light-2">
        <div data-anim-wrap class="container">
            <div data-anim-child="slide-up delay-1" class="row y-gap-20 justify-between items-end">
                <div class="col-auto">
                    <div class="sectionTitle -md">
                        <h2 class="sectionTitle__title">
                            {% if request.session.lang == "fr" %}
                                Homélies
                            {% elif request.session.lang == "rw" %}
                                Inyigisho
                            {% elif request.session.lang == "sw" %}
                                Mahubiri
                            {% else %}
                                Homilies
                            {% endif %}
                        </h2>
                    </div>
                </div>
                <div class="col-auto">
                    <a href="{% url 'base:homilies' %}" class="button -md -blue-1 bg-blue-1-05 text-blue-1">
                        More <div class="icon-arrow-top-right ml-15"></div>
                    </a>
                </div>
            </div>
    
            <div class="row y-gap-30 pt-40 sm:pt-20">
                {% for homily in homilies %}
                    <div data-anim-child="slide-up delay-{{ forloop.counter }}" class="col-xl-3 col-lg-3 col-sm-6">
                        <div class="hotelsCard -type-1">
                            <div class="hotelsCard__image">
                                <div class="cardImage ratio ratio-1:1">
                                    <div class="cardImage__content">
                                        {% if homily.image %}
                                            <img class="rounded-4 col-12" src="{{ homily.image.url }}" alt="Homily image">
                                        {% else %}
                                            <img class="rounded-4 col-12" src="{% static 'https://th.bing.com/th/id/R.7e8731768b177cb71531b1a99f099b1d?rik=5DVLPzkPXrkxTA&pid=ImgRaw&r=0" alt="No image">
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="hotelsCard__content mt-10">
                                <h4 class="hotelsCard__title text-dark-1 text-18 lh-16 fw-500">
                                    {% if request.session.lang == "fr" %}
                                        {{ homily.title_fr }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ homily.title_rw }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ homily.title_sw }}
                                    {% else %}
                                        {{ homily.title_en }}
                                    {% endif %}
                                </h4>
                                <p class="text-light-1 lh-14 text-14 mt-5">
                                    {% if request.session.lang == "fr" %}
                                        {{ homily.content_fr|truncatewords:20 }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ homily.content_rw|truncatewords:20 }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ homily.content_sw|truncatewords:20 }}
                                    {% else %}
                                        {{ homily.content_en|truncatewords:20 }}
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <div class="col-12 text-center text-light-1">
                        {% if request.session.lang == "fr" %}
                            Aucune homélie disponible.
                        {% elif request.session.lang == "rw" %}
                            Nta nyigisho ziboneka.
                        {% elif request.session.lang == "sw" %}
                            Hakuna mahubiri zinapatikana.
                        {% else %}
                            No homilies available.
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="layout-pt-md layout-pb-md">
        <div data-anim-wrap class="container">
            <div data-anim-child="slide-up delay-1" class="row y-gap-20 justify-between items-end">
                <div class="col-auto">
                    <div class="sectionTitle -md">
                        <h2 class="sectionTitle__title">
                            {% if request.session.lang == "fr" %}
                                Événements
                            {% elif request.session.lang == "rw" %}
                                Ibikorwa
                            {% elif request.session.lang == "sw" %}
                                Matukio
                            {% else %}
                                Events
                            {% endif %}
                        </h2>
                    </div>
                </div>
                <div class="col-auto">
                    <a href="{% url 'base:events' %}" class="button -md -blue-1 bg-blue-1-05 text-blue-1">
                        {% if request.session.lang == "fr" %}
                            Voir plus
                        {% elif request.session.lang == "rw" %}
                            Reba byinshi
                        {% elif request.session.lang == "sw" %}
                            Tazama Zaidi
                        {% else %}
                            View More
                        {% endif %}
                        <div class="icon-arrow-top-right ml-15"></div>
                    </a>
                </div>
            </div>

            <div class="row y-gap-30 pt-40 sm:pt-20">
                {% for event in events %}
                    <div data-anim-child="slide-up delay-{{ forloop.counter }}" class="col-xl-3 col-lg-3 col-sm-6">
                        <a href="{% url 'base:eventDetails' event.id %}" class="hotelsCard -type-1">
                            <div class="hotelsCard__image">
                                <div class="cardImage ratio ratio-1:1">
                                    <div class="cardImage__content">
                                        {% if event.image %}
                                            <img class="rounded-4 col-12" src="{{ event.image.url }}" alt="Event image">
                                        {% else %}
                                            <img class="rounded-4 col-12" src="{% static 'img/placeholder.png' %}" alt="No image">
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="hotelsCard__content mt-10">
                                <h4 class="hotelsCard__title text-dark-1 text-18 lh-16 fw-500">
                                    {% if request.session.lang == "fr" %}
                                        {{ event.title_fr }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ event.title_rw }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ event.title_sw }}
                                    {% else %}
                                        {{ event.title_en }}
                                    {% endif %}
                                </h4>
                                <p class="text-light-1 lh-14 text-14 mt-5">
                                    {{ event.event_date|date:"F j, Y" }}
                                </p>
                                <p class="text-light-1 lh-14 text-14 mt-5">
                                    {% if request.session.lang == "fr" %}
                                        {{ event.description_fr|truncatewords:20 }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ event.description_rw|truncatewords:20 }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ event.description_sw|truncatewords:20 }}
                                    {% else %}
                                        {{ event.description_en|truncatewords:20 }}
                                    {% endif %}
                                </p>
                            </div>
                        </a>
                    </div>
                {% empty %}
                    <div class="col-12 text-center text-light-1">
                        {% if request.session.lang == "fr" %}
                            Aucun événement disponible.
                        {% elif request.session.lang == "rw" %}
                            Nta bikorwa biboneka.
                        {% elif request.session.lang == "sw" %}
                            Hakuna matukio yanayopatikana.
                        {% else %}
                            No events available.
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock content %}