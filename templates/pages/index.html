{% extends 'layouts/app.html' %}
{% load static %}
{% block content %}
    {% include 'components/hero.html' %}

    <section class="layout-pt-md layout-pb-lg">
        <div data-anim-wrap class="container">
            <div data-anim-child="slide-up" class="row y-gap-20 justify-between items-end">
                <div class="col-auto">
                    <div class="sectionTitle -md">
                        <h2 class="sectionTitle__title">
                            {% if request.session.lang == "fr" %}
                                Horaire des messes
                            {% elif request.session.lang == "rw" %}
                                Igihe cya Misa
                            {% elif request.session.lang == "sw" %}
                                Ratiba ya&nbsp;Misa
                            {% else %}
                                Mass Schedule
                            {% endif %}
                        </h2>
                        <p class=" sectionTitle__text mt-5 sm:mt-0">
                            
                        </p>
                    </div>
                </div>
                <div class="col-auto">
                    <a href="{% url 'base:massSchedule' %}" class="button -md -blue-1 bg-blue-1-05 text-blue-1">
                        {% if request.session.lang == "fr" %}
                            Voir plus
                        {% elif request.session.lang == "rw" %}
                            Reba Byinshi
                        {% elif request.session.lang == "sw" %}
                            Tazama Zaidi
                        {% else %}
                            View More
                        {% endif %}
                        <div class="icon-arrow-top-right ml-15"></div>
                    </a>
                </div>
            </div>
            <div class="row y-gap-30 pt-40 sm:pt-20">
                {% for schedule in schedules %}
                    <div data-anim-child="slide-up delay-1" class="col-12">
                        <div class="px-20 py-20 rounded-4 border-light">
                            <div class="row y-gap-30 justify-between xl:justify-">
        
                                <div class="col-xl-9 col-lg-12">
                                    <div class="row y-gap-10 items-center">
                                        <div class="col-sm-auto">
                                            <img class="size-40" src="{% static 'img/logo/logo.png' %}" alt="image">
                                        </div>
        
                                        <div class="col">
                                            <div class="row x-gap-20 items-end">
                                                <div class="col-auto">
                                                    <div class="lh-15 fw-500">
                                                        {{ schedule.start_time|date:"H:i" }}
                                                    </div>
                                                    <div class="text-15 lh-15 text-light-1">
                                                        {{ schedule.start_time|date:"A" }}
                                                    </div>
                                                </div>
        
                                                <div class="col text-center">
                                                    <div class="flightLine">
                                                        <div></div>
                                                        <div></div>
                                                    </div>
                                                    <div class="text-15 lh-15 text-light-1 mt-10">
                                                        {{ schedule.date|date:"F j"|upper }}
                                                    </div>
                                                </div>
        
                                                <div class="col-auto">
                                                    <div class="lh-15 fw-500">
                                                        {{ schedule.end_time|date:"H:i" }}
                                                    </div>
                                                    <div class="text-15 lh-15 text-light-1">
                                                        {{ schedule.end_time|date:"A" }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
        
                                <div class="col-auto">
                                    <div class="d-flex items-center">
                                        <div class="text-right mr-24">
                                            <div class="lh-15 fw-500">
                                                {% if request.session.lang == "fr" %}
                                                    {% if schedule.mass_type == "morning" %}Messe du matin{% else %}Messe du soir{% endif %}
                                                {% elif request.session.lang == "rw" %}
                                                    {% if schedule.mass_type == "morning" %}Misa ya mu gitondo{% else %}Misa ya nimugoroba{% endif %}
                                                {% elif request.session.lang == "sw" %}
                                                    {% if schedule.mass_type == "morning" %}Misa ya asubuhi{% else %}Misa ya jioni{% endif %}
                                                {% else %}
                                                    {{ schedule.get_mass_type_display }}
                                                {% endif %}
                                            </div>
                                            <div class="text-15 lh-15 text-light-1"></div>
                                        </div>
                                        {% comment %} <a href="#" class="button -outline-blue-1 px-30 h-50 text-blue-1">
                                            View Deal <div class="icon-arrow-top-right ml-15"></div>
                                        </a> {% endcomment %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                        <div class="col-12 text-center text-light-1">
                            {% if request.session.lang == "fr" %}
                                Pas d’horaires disponibles.
                            {% elif request.session.lang == "rw" %}
                                Nta gahunda ziboneka.
                            {% elif request.session.lang == "sw" %}
                                Hakuna ratiba zinapatikana.
                            {% else %}
                                No schedules available.
                            {% endif %}
                        </div>
                    {% endfor %}
            </div>
        </div>
    </section>

    <section class="layout-pt-md layout-pb-md bg-light-2">
        <div data-anim-wrap class="container">
            <div data-anim-child="slide-up delay-1" class="row y-gap-20 justify-between items-end">
                <div class="col-auto">
                    <div class="sectionTitle -md">
                        <h2 class="sectionTitle__title">
                            {% if request.session.lang == "fr" %}
                                Homélies
                            {% elif request.session.lang == "rw" %}
                                Inyigisho
                            {% elif request.session.lang == "sw" %}
                                Mahubiri
                            {% else %}
                                Homilies
                            {% endif %}
                        </h2>
                    </div>
                </div>
                <div class="col-auto">
                    <a href="{% url 'base:homilies' %}" class="button -md -blue-1 bg-blue-1-05 text-blue-1">
                        More <div class="icon-arrow-top-right ml-15"></div>
                    </a>
                </div>
            </div>
    
            <div class="row y-gap-30 pt-40 sm:pt-20">
                {% for homily in homilies %}
                    <div data-anim-child="slide-up delay-{{ forloop.counter }}" class="col-xl-3 col-lg-3 col-sm-6">
                        <div class="hotelsCard -type-1">
                            <div class="hotelsCard__image">
                                <div class="cardImage ratio ratio-1:1">
                                    <div class="cardImage__content">
                                        {% if homily.image %}
                                            <img class="rounded-4 col-12" src="{{ homily.image.url }}" alt="Homily image">
                                        {% else %}
                                            <img class="rounded-4 col-12" src="{% static 'https://th.bing.com/th/id/R.7e8731768b177cb71531b1a99f099b1d?rik=5DVLPzkPXrkxTA&pid=ImgRaw&r=0" alt="No image">
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="hotelsCard__content mt-10">
                                <h4 class="hotelsCard__title text-dark-1 text-18 lh-16 fw-500">
                                    {% if request.session.lang == "fr" %}
                                        {{ homily.title_fr }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ homily.title_rw }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ homily.title_sw }}
                                    {% else %}
                                        {{ homily.title_en }}
                                    {% endif %}
                                </h4>
                                <p class="text-light-1 lh-14 text-14 mt-5">
                                    {% if request.session.lang == "fr" %}
                                        {{ homily.content_fr|truncatewords:20 }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ homily.content_rw|truncatewords:20 }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ homily.content_sw|truncatewords:20 }}
                                    {% else %}
                                        {{ homily.content_en|truncatewords:20 }}
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <div class="col-12 text-center text-light-1">
                        {% if request.session.lang == "fr" %}
                            Aucune homélie disponible.
                        {% elif request.session.lang == "rw" %}
                            Nta nyigisho ziboneka.
                        {% elif request.session.lang == "sw" %}
                            Hakuna mahubiri zinapatikana.
                        {% else %}
                            No homilies available.
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="layout-pt-md layout-pb-md">
        <div data-anim-wrap class="container">
            <div data-anim-child="slide-up delay-1" class="row y-gap-20 justify-between items-end">
                <div class="col-auto">
                    <div class="sectionTitle -md">
                        <h2 class="sectionTitle__title">
                            {% if request.session.lang == "fr" %}
                                Événements
                            {% elif request.session.lang == "rw" %}
                                Ibikorwa
                            {% elif request.session.lang == "sw" %}
                                Matukio
                            {% else %}
                                Events
                            {% endif %}
                        </h2>
                    </div>
                </div>
                <div class="col-auto">
                    <a href="{% url 'base:events' %}" class="button -md -blue-1 bg-blue-1-05 text-blue-1">
                        {% if request.session.lang == "fr" %}
                            Voir plus
                        {% elif request.session.lang == "rw" %}
                            Reba byinshi
                        {% elif request.session.lang == "sw" %}
                            Tazama Zaidi
                        {% else %}
                            View More
                        {% endif %}
                        <div class="icon-arrow-top-right ml-15"></div>
                    </a>
                </div>
            </div>

            <div class="row y-gap-30 pt-40 sm:pt-20">
                {% for event in events %}
                    <div data-anim-child="slide-up delay-{{ forloop.counter }}" class="col-xl-3 col-lg-3 col-sm-6">
                        <a href="{% url 'base:eventDetails' event.id %}" class="hotelsCard -type-1">
                            <div class="hotelsCard__image">
                                <div class="cardImage ratio ratio-1:1">
                                    <div class="cardImage__content">
                                        {% if event.image %}
                                            <img class="rounded-4 col-12" src="{{ event.image.url }}" alt="Event image">
                                        {% else %}
                                            <img class="rounded-4 col-12" src="{% static 'img/placeholder.png' %}" alt="No image">
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="hotelsCard__content mt-10">
                                <h4 class="hotelsCard__title text-dark-1 text-18 lh-16 fw-500">
                                    {% if request.session.lang == "fr" %}
                                        {{ event.title_fr }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ event.title_rw }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ event.title_sw }}
                                    {% else %}
                                        {{ event.title_en }}
                                    {% endif %}
                                </h4>
                                <p class="text-light-1 lh-14 text-14 mt-5">
                                    {{ event.event_date|date:"F j, Y" }}
                                </p>
                                <p class="text-light-1 lh-14 text-14 mt-5">
                                    {% if request.session.lang == "fr" %}
                                        {{ event.description_fr|truncatewords:20 }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ event.description_rw|truncatewords:20 }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ event.description_sw|truncatewords:20 }}
                                    {% else %}
                                        {{ event.description_en|truncatewords:20 }}
                                    {% endif %}
                                </p>
                            </div>
                        </a>
                    </div>
                {% empty %}
                    <div class="col-12 text-center text-light-1">
                        {% if request.session.lang == "fr" %}
                            Aucun événement disponible.
                        {% elif request.session.lang == "rw" %}
                            Nta bikorwa biboneka.
                        {% elif request.session.lang == "sw" %}
                            Hakuna matukio yanayopatikana.
                        {% else %}
                            No events available.
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section data-anim-wrap class="section-bg layout-pt-lg layout-pb-lg">
        <div data-anim-child="fade delay-1" class="section-bg__item -mx-20 bg-blue-1"></div>

        <div class="container">
            <div data-anim-child="slide-up delay-2" class="row items-center justify-center text-center">
                <div class="col-auto">
                    <i class="icon-newsletter text-60 sm:text-40 text-white"></i>

                    <h2 class="text-30 sm:text-24 lh-15 text-white mt-20">
                        Support Our Mission
                    </h2>
                    <p class="text-white mt-5">
                        Your generous donations help us continue our work. Click below to contribute:
                    </p>

                    <div class="single-field -w-410 d-flex x-gap-10 flex-wrap y-gap-20 pt-30">
                        <div class="col-auto">
                            <input class="col-12 bg-white h-60" type="number" placeholder="20 Dollars">
                        </div>
                        <div class="col-auto">
                            <button class="button -md -white h-60 bg-dark-1 text-white">Donate</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {# — Advertisements Section — #}
    <section class="layout-pt-md layout-pb-md bg-light-2">
        <div data-anim-wrap class="container">
            <div data-anim-child="slide-up delay-1" class="row y-gap-20 justify-between items-end">
                <div class="col-auto">
                    <div class="sectionTitle -md">
                        <h2 class="sectionTitle__title">
                            {% if request.session.lang == "fr" %}
                                Publicités
                            {% elif request.session.lang == "rw" %}
                                Amatangazo
                            {% elif request.session.lang == "sw" %}
                                Matangazo
                            {% else %}
                                Advertisements
                            {% endif %}
                        </h2>
                    </div>
                </div>
            </div>

            <div class="row y-gap-30 pt-40 sm:pt-20">
                {% for ad in adverts %}
                    <div data-anim-child="slide-up delay-{{ forloop.counter }}" class="col-xl-3 col-lg-3 col-sm-6">
                        <div class="hotelsCard -type-1">
                            <div class="hotelsCard__image">
                                <div class="cardImage ratio ratio-1:1">
                                    <div class="cardImage__content">
                                        {% if ad.image %}
                                            <img class="rounded-4 col-12" src="{{ ad.image.url }}" alt="Advert image">
                                        {% else %}
                                            <img class="rounded-4 col-12" src="{% static 'img/placeholder.png' %}" alt="No image">
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="hotelsCard__content mt-10">
                                <h4 class="hotelsCard__title text-dark-1 text-18 lh-16 fw-500">
                                    {% if request.session.lang == "fr" %}
                                        {{ ad.title_fr }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ ad.title_rw }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ ad.title_sw }}
                                    {% else %}
                                        {{ ad.title_en }}
                                    {% endif %}
                                </h4>
                                <p class="text-light-1 lh-14 text-14 mt-5">
                                    {% if request.session.lang == "fr" %}
                                        {{ ad.content_fr|truncatewords:20 }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ ad.content_rw|truncatewords:20 }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ ad.content_sw|truncatewords:20 }}
                                    {% else %}
                                        {{ ad.content_en|truncatewords:20 }}
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <div class="col-12 text-center text-light-1">
                        {% if request.session.lang == "fr" %}
                            Aucune publicité disponible.
                        {% elif request.session.lang == "rw" %}
                            Nta matangazo aboneka.
                        {% elif request.session.lang == "sw" %}
                            Hakuna matangazo yanayopatikana.
                        {% else %}
                            No advertisements available.
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="layout-pt-md layout-pb-md">
        <div data-anim-wrap class="container">
            <div data-anim-child="slide-up delay-1" class="row y-gap-20 justify-between items-end">
                <div class="col-auto">
                    <div class="sectionTitle -md">
                        <h2 class="sectionTitle__title">
                            {% if request.session.lang == "fr" %}
                                Chambres
                            {% elif request.session.lang == "rw" %}
                                Ibyumba
                            {% elif request.session.lang == "sw" %}
                                Vyumba
                            {% else %}
                                Rooms
                            {% endif %}
                        </h2>
                    </div>
                </div>
                <div class="col-auto">
                    <a href="{% url 'base:rooms' %}" class="button -md -blue-1 bg-blue-1-05 text-blue-1">
                        {% if request.session.lang == "fr" %}
                            Voir plus
                        {% elif request.session.lang == "rw" %}
                            Reba byinshi
                        {% elif request.session.lang == "sw" %}
                            Tazama Zaidi
                        {% else %}
                            View More
                        {% endif %}
                        <div class="icon-arrow-top-right ml-15"></div>
                    </a>
                </div>
            </div>

            <div class="row y-gap-30 pt-40 sm:pt-20">
                {% for room in rooms %}
                    <div data-anim-child="slide-up delay-{{ forloop.counter }}" class="col-xl-3 col-lg-3 col-sm-6">
                        <a href="{% url 'base:roomDetails' room.id %}" class="hotelsCard -type-1">
                            <div class="hotelsCard__image">
                                <div class="cardImage ratio ratio-1:1">
                                    <div class="cardImage__content">
                                        {% if room.images.first %}
                                            <img class="rounded-4 col-12" src="{{ room.images.first.image.url }}" alt="Room image">
                                        {% else %}
                                            <img class="rounded-4 col-12" src="{% static 'img/placeholder.png' %}" alt="No image">
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="hotelsCard__content mt-10">
                                <h4 class="hotelsCard__title text-dark-1 text-18 lh-16 fw-500">
                                    {% if request.session.lang == "fr" %}
                                        {{ room.title_fr }}
                                    {% elif request.session.lang == "rw" %}
                                        {{ room.title_rw }}
                                    {% elif request.session.lang == "sw" %}
                                        {{ room.title_sw }}
                                    {% else %}
                                        {{ room.title_en }}
                                    {% endif %}
                                </h4>
                                <p class="text-light-1 lh-14 text-14 mt-5">
                                    {{ room.price_per_night }} USD / night
                                </p>
                            </div>
                        </a>
                    </div>
                {% empty %}
                    <div class="col-12 text-center text-light-1">
                        {% if request.session.lang == "fr" %}
                            Aucune chambre disponible.
                        {% elif request.session.lang == "rw" %}
                            Nta byumba biboneka.
                        {% elif request.session.lang == "sw" %}
                            Hakuna vyumba vinapatikana.
                        {% else %}
                            No rooms available.
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="layout-pt-md layout-pb-md bg-light-2">
    <div data-anim-wrap class="container">
        <div data-anim-child="slide-up delay-1" class="row y-gap-20 justify-between items-end">
            <div class="col-auto">
                <div class="sectionTitle -md">
                    <h2 class="sectionTitle__title">
                        {% if request.session.lang == "fr" %}
                            Témoignages
                        {% elif request.session.lang == "rw" %}
                            Ubuhamya
                        {% elif request.session.lang == "sw" %}
                            Ushuhuda
                        {% else %}
                            Testimonies
                        {% endif %}
                    </h2>
                </div>
            </div>
            <div class="col-auto">
                <a href="{% url 'base:testimonies' %}" class="button -md -blue-1 bg-blue-1-05 text-blue-1">
                    {% if request.session.lang == "fr" %}
                        Voir plus
                    {% elif request.session.lang == "rw" %}
                        Reba byinshi
                    {% elif request.session.lang == "sw" %}
                        Tazama Zaidi
                    {% else %}
                        View More
                    {% endif %}
                    <div class="icon-arrow-top-right ml-15"></div>
                </a>
            </div>
        </div>

        <div class="row y-gap-30 pt-40 sm:pt-20">
            {% for testimony in testimonies %}
                <div data-anim-child="slide-up delay-{{ forloop.counter }}" class="col-xl-3 col-lg-3 col-sm-6">
                    <div class="hotelsCard -type-1 p-20">
                        <div class="hotelsCard__content">
                            <h4 class="hotelsCard__title text-dark-1 text-18 lh-16 fw-600">
                                {{ testimony.name }}
                            </h4>
                            <div class="text-14 text-light-1 mb-10">
                                {{ testimony.get_type_display }}
                            </div>
                            <p class="text-light-1 lh-14 text-14">
                                {% if testimony.testimony_type == 'text' %}
                                    {{ testimony.content_text|truncatewords:30 }}
                                {% else %}
                                    {% if testimony.testimony_type == 'audio' %}
                                        <audio controls>
                                            <source src="{{ testimony.audio.url }}" type="audio/mpeg">
                                            Your browser does not support the audio element.
                                        </audio>
                                    {% elif testimony.testimony_type == 'video' %}
                                        <video controls width="100%">
                                            <source src="{{ testimony.video.url }}" type="video/mp4">
                                            Your browser does not support the video tag.
                                        </video>
                                    {% endif %}
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="col-12 text-center text-light-1">
                    {% if request.session.lang == "fr" %}
                        Aucun témoignage disponible.
                    {% elif request.session.lang == "rw" %}
                        Nta buhamya buboneka.
                    {% elif request.session.lang == "sw" %}
                        Hakuna ushuhuda unaopatikana.
                    {% else %}
                        No testimonies available.
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>
</section>

{% endblock content %}